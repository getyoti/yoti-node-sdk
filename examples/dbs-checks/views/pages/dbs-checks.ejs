<!DOCTYPE html>
<html class="yoti-html">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Yoti client example</title>
  <link rel="stylesheet" type="text/css" href="/static/index.css" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" />
</head>

<body class="yoti-body">
  <main>
    <section class="yoti-top-section">
      <div class="yoti-logo-section">
        <img
          class="yoti-logo-image"
          src="/static/assets/logo.png"
          srcset="/static/assets/logo@2x.png 2x"
          alt="Yoti"/>
      </div>

      <h1 class="yoti-top-header">DBS Basic Checks Example</h1>

      <div class="yoti-sdk-integration-section">
        <div id="yoti-share-button"></div>
      </div>
    </section>
  </main>
  <script src="https://www.public.stg1.dmz.yoti.com/share/client/"></script>
  <script>
    async function getShareUrl() {
      console.log('The get share url has been called.')
      const response = await fetch(`/get-new-share-url`);
      const myJson = await response.json();
      console.log(JSON.stringify(myJson));
      return myJson.shareUrl;
    }

    window.Yoti.Share.init({
      "elements": [
        {
          "domId": "yoti-share-button",
          "clientSdkId": "<%= yotiClientSdkId %>",
          "shareUrlProvider": getShareUrl,
          "button": {
            "label": "Use Yoti",
            "align": "center",
            "width": "auto",
            "verticalAlign": "top"
          },
          "type": "modal"
        }
      ]
    });
  </script>
</body>

</html>
