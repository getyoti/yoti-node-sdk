<!DOCTYPE html>
<html>

<head>
  <title>Yoti Doc Scan</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a href="/" class="navbar-brand">Yoti Doc Scan</a>
  </nav>
  <div class="container">

    <h1>Get Session Result</h1>

    <div class="row">
      <div class="col">
        <table class="table table-striped">
          <tbody>
            <tr>
              <td>Session ID</td>
              <td><%= sessionResult.getSessionId() %></td>
            </tr>
            <tr>
              <td>State</td>
              <td><%= sessionResult.getState() %></td>
            </tr>
            <% if (sessionResult.getClientSessionToken()) { %>
            <tr>
              <td>Client Session Token</td>
              <td>
                <%= sessionResult.getClientSessionToken() %>
              </td>
            </tr>
            <% } %>
            <tr>
              <td>Client Session Token TTL</td>
              <td><%= sessionResult.getClientSessionTokenTtl() %></td>
            </tr>
            <tr>
              <td>User Tracking ID</td>
              <td><%= sessionResult.getUserTrackingId() %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <% if (sessionResult.getAuthenticityChecks().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
        <h2>Authenticity Checks</h2>
          <% sessionResult.getAuthenticityChecks().forEach(function(check){ %>
            <%- include('partials/check', { check }); %>
          <% }); %>
        </div>
      </div>
    <% } %>

    <% if (sessionResult.getTextDataChecks().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
        <h2>Text Data Checks</h2>
          <% sessionResult.getTextDataChecks().forEach(function(check){ %>
            <%- include('partials/check', { check }); %>
          <% }); %>
        </div>
      </div>
    <% } %>


    <% if (sessionResult.getFaceMatchChecks().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
        <h2>FaceMatch Checks</h2>
          <% sessionResult.getFaceMatchChecks().forEach(function(check){ %>
            <%- include('partials/check', { check }); %>
          <% }); %>
        </div>
      </div>
    <% } %>


    <% if (sessionResult.getLivenessChecks().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
        <h2>Liveness Checks</h2>
          <% sessionResult.getLivenessChecks().forEach(function(check){ %>
            <%- include('partials/check', { check }); %>
          <% }); %>
        </div>
      </div>
    <% } %>

    <% if (sessionResult.getResources().getIdDocuments().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
          <h2>ID Documents</h2>
        </div>
      </div>

      <% sessionResult.getResources().getIdDocuments().forEach(function(document){ %>
        <div class="row pt-4">
          <div class="col">
            <table class="table table-striped">
              <tbody>
                <tr>
                  <td>Type</td>
                  <td><%= document.getDocumentType(); %></td>
                </tr>
                <tr>
                  <td>Country</td>
                  <td><%= document.getIssuingCountry(); %></td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>

        <div class="row pt-4">
          <div class="col">
            <h3>Text Extraction Tasks</h3>
            <% document.getTextExtractionTasks().forEach(function(task) { %>
              <%- include('partials/task', { task }); %>

              <% if (task.getGeneratedTextDataChecks().length > 0) { %>
                <h4>Generated Text Data Checks</h4>
                <% task.getGeneratedTextDataChecks().forEach(function(check) { %>
                  <h5><%= check.getType() %></h5>
                  <table class="table table-striped table-dark">
                    <tbody>
                      <tr>
                        <td>ID</td>
                        <td><%= check.getId() %></td>
                      </tr>
                    </tbody>
                  </table>
                <% }); %>
              <% } %>

              <% if (task.getGeneratedMedia().length > 0) { %>
                <h4>Generated Media</h4>

                <% task.getGeneratedMedia().forEach(function(media) { %>
                  <h5><%= media.getId() %></h5>
                  <table class="table table-striped">
                    <tbody>
                      <tr>
                        <td>ID</td>
                        <td><%= media.getId() %></td>
                      </tr>
                      <tr>
                        <td>Type</td>
                        <td><%= media.getType() %></td>
                      </tr>
                    </tbody>
                  </table>
                <% }); %>
              <% } %>

            <% }); %>

          </div>
        </div>

        <div class="row pt-4">
          <div class="col">
            <% if (document.getPages()) { %>
              <h3>Pages</h3>
              <div class="card-group">
                <% document.getPages().forEach(function(page) { %>
                  <% if (page.getMedia()) { %>
                    <div class="card" style="width: 18rem;">
                      <img class="card-img-top" src="/media?mediaId=<%= page.getMedia().getId() %>" />
                      <div class="card-body">
                        <p>Method: <%= page.getCaptureMethod(); %></p>
                      </div>
                    </div>
                  <% } %>
                <% }); %>
              </div>
            <% } %>

          </div>
        </div>

      <% }); %>
    <% } %>

    <% if (sessionResult.getResources().getZoomLivenessResources().length > 0) { %>
      <div class="row pt-4">
        <div class="col">
          <h2>Zoom Liveness Resources</h2>
          <% sessionResult.getResources().getZoomLivenessResources().forEach(function(livenessResource){ %>

            <table class="table table-striped table-light">
              <tbody>
                <tr>
                  <td>ID</td>
                  <td><%= livenessResource.getId() %></td>
                </tr>
              </tbody>
            </table>

            <% if (livenessResource.getFaceMap()) { %>
              <h3>FaceMap</h3>
              <table class="table table-striped table-dark">
                <tbody>
                  <tr>
                    <td>Media</td>
                    <td>
                      <% if (livenessResource.getFaceMap().getMedia()) { %>
                        <a href="/media?mediaId=<%= livenessResource.getFaceMap().getMedia().getId() %>">Download &raquo;</a>
                      <% } else { %>
                        -
                      <% } %>
                    </td>
                  </tr>
                </tbody>
              </table>
            <% } %>

          </div>
        </div>

        <div class="row pt-4">
          <div class="col">
            <div class="card-group">
              <% livenessResource.getFrames().forEach(function(frame) { %>
                <div class="card">
                  <% if (frame.getMedia()) { %>
                  <img class="card-img-top" src="/media?mediaId=<%= frame.getMedia().getId() %>" />
                  <% } else { %>
                  <img class="card-img-top" src="/static/assets/images/profile.svg" />
                  <% } %>
                  <div class="card-body">
                    <h5 class="card-title">Frame</h5>
                  </div>
                </div>
              <% }); %>
            </div>
          </div>
        </div>
      <% }); %>

    <% } %>
  </div>
</body>

</html>