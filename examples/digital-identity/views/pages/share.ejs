<!DOCTYPE html>
<html class="yoti-html">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Yoti client example</title>
  <link rel="stylesheet" type="text/css" href="/static/index.css" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" />
</head>

<body class="yoti-body">
  <main>
    <section class="yoti-top-section">
      <div class="yoti-logo-section">
        <img
          class="yoti-logo-image"
          src="/static/assets/logo.png"
          srcset="/static/assets/logo@2x.png 2x"
          alt="Yoti"/>
      </div>

      <h1 class="yoti-top-header">Share Example</h1>

      <div class="yoti-sdk-integration-section">
        <div id="yoti-share-button"></div>
      </div>
    </section>
  </main>
  <script src="https://www.public.stg1.dmz.yoti.com/share/client/v2"></script>
  <script>
      const sessionIdResolver = async () => {
          const session = await fetch('/get-new-session')
          if
      };

      const completionHandler = (receivedReceiptId) => {
          console.log('Session completed - received receiptId:', receivedReceiptId);
      };

      const errorListener = (errorCode) => {
          console.warn('Session errored - received errorCode:', errorCode);
      };

      const start = async () => {
          const { Yoti } = window
          if (Yoti) {
              console.log('I am here')
              await Yoti.ready()
              console.log('I am here as well')
              await Yoti.createWebShare({
                  name: 'share',
                  domId: 'yoti-share-button',
                  sdkId: "<%= yotiClientSdkId %>",
                  hooks: {
                      sessionIdResolver,
                      completionHandler,
                      errorListener,
                  },
              })
          }
      }
      start().catch((e) => {
          console.warn(`could not create webShare:`, e)
      })
  </script>
</body>

</html>
