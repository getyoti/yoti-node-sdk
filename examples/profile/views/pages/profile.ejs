<%
const fullName = profile.getFullName();
const givenNames = profile.getGivenNames();
const familyName = profile.getFamilyName();
const phoneNumber = profile.getPhoneNumber();
const dateOfBirth = profile.getDateOfBirth();
const ageCondition = profile.getAgeVerified();
const postalAddress = profile.getPostalAddress();
const structuredPostalAddress = profile.getStructuredPostalAddress();
const emailAddress = profile.getEmailAddress();
const nationality = profile.getNationality();
const gender = profile.getGender();
const userSelfie = profile.getSelfie();
%>
<!DOCTYPE html>
<html>
<head>
  <title>Yoti Profile</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
<div class="container">
  <h2><a href="/">Home</a></h2>
  <h3>Yoti User Profile</h3>
  <table class="table table-sm">
    <thead class="thead-dark">
    <tr>
      <th rowspan="2" scope="col">Name</th>
      <th rowspan="2" scope="col">Value</th>
      <th colspan="3" width="33%" class="table-dark">
        <table class="table table-dark anchor-table">
          <tr class="row no-gutters">
            <td colspan="3" class="table-dark" align="center" width="100%">
              Anchors
            </td>
          </tr>
          <tr class="row no-gutters">
            <th class="col-md-3">S/V</th>
            <th class="col-md-6">Value</th>
            <th class="col-md-3">Subtype</th>
          </tr>
        </table>
      </th>
    </tr>
    </thead>
    <tbody>
    <% if (givenNames) { %>
    <tr>
      <th scope="row">Given Name(s)</th>
      <td><%= givenNames.getValue() %></td>
      <td colspan="3" width="33%">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < givenNames.getSources().length; i += 1) { %>
          <% let source = givenNames.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < givenNames.getVerifiers().length; i += 1) { %>
          <% let verifier = givenNames.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (familyName) { %>
    <tr>
      <th scope="row">Family Name</th>
      <td><%= familyName.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < familyName.getSources().length; i += 1) { %>
          <% let source = familyName.getSources()[i]; %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < familyName.getVerifiers().length;  i += 1) { %>
          <% let verifier = familyName.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (fullName) { %>
    <tr>
      <th scope="row">Full Name</th>
      <td><%= fullName.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < fullName.getSources().length;  i += 1) { %>
          <% let source = fullName.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < fullName.getVerifiers().length; i += 1) { %>
          <% let verifier = fullName.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (phoneNumber) { %>
    <tr>
      <th scope="row">Phone</th>
      <td><%= phoneNumber.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < phoneNumber.getSources().length; i += 1) { %>
          <% let source = phoneNumber.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < phoneNumber.getVerifiers().length; i += 1) { %>
          <% let verifier = phoneNumber.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (emailAddress) { %>
    <tr>
      <th scope="row">Email</th>
      <td><%= emailAddress.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < emailAddress.getSources().length; i += 1) { %>
          <% let source = emailAddress.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < emailAddress.getVerifiers().length; i += 1) { %>
          <% let verifier = emailAddress.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (dateOfBirth) { %>
    <tr>
      <th scope="row">Date Of Birth</th>
      <td><%= dateOfBirth.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < dateOfBirth.getSources().length; i += 1) { %>
          <% let source = dateOfBirth.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < dateOfBirth.getVerifiers().length; i += 1) { %>
          <% let verifier = dateOfBirth.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (ageCondition) { %>
    <tr>
      <th scope="row">Age verified</th>
      <td><%= ageCondition.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < ageCondition.getSources().length; i += 1) { %>
          <% let source = ageCondition.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < ageCondition.getVerifiers().length; i += 1) { %>
          <% let verifier = ageCondition.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (postalAddress) { %>
    <tr>
      <th scope="row">Address</th>
      <td>
        <p class="col-12 col-md-4">
          <%= postalAddress.getValue() %>
        </p>
      </td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < postalAddress.getSources().length; i += 1) { %>
          <% let source = postalAddress.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < postalAddress.getVerifiers().length; i += 1) { %>
          <% let verifier = postalAddress.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (structuredPostalAddress) { %>
      <tr>
        <th scope="row">Structured Address</th>
        <td>
          <table class="table">
            <% Object.keys(structuredPostalAddress.getValue()).forEach((key) => { %>
              <tr class="row no-gutters">
                <td class="col-md-3"><%= key %></td>
                <td class="col-md-6"><%= structuredPostalAddress.getValue()[key] %></td>
              </tr>
            <% }); %>
          </table>
        </td>
        <td colspan="3">
          <table class="table">
            <tbody>
            <% for(let i = 0; i < structuredPostalAddress.getSources().length; i += 1) { %>
            <% let source = structuredPostalAddress.getSources()[i] %>
            <tr class="row no-gutters">
              <td class="col-md-3">Source</td>
              <td class="col-md-6"><%= source.getValue() %></td>
              <td class="col-md-3"><%= source.getSubType() %></td>
            </tr>
            <% } %>
            <% for(let i = 0; i < structuredPostalAddress.getVerifiers().length; i += 1) { %>
            <% let verifier = structuredPostalAddress.getVerifiers()[i] %>
            <tr class="row no-gutters">
              <td class="col-md-3">Verifier</td>
              <td class="col-md-6"><%= verifier.getValue() %></td>
              <td class="col-md-3"><%= verifier.getSubType() %></td>
            </tr>
            <% } %>
            </tbody>
          </table>
        </td>
      </tr>
      <% } %>
    <% if (gender) { %>
    <tr>
      <th scope="row">Gender</th>
      <td><%= gender.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < gender.getSources().length; i += 1) { %>
          <% let source = gender.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < gender.getVerifiers().length; i += 1) { %>
          <% let verifier = gender.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (nationality) { %>
    <tr>
      <th scope="row">Nationality</th>
      <td><%= nationality.getValue() %></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < nationality.getSources().length; i += 1) { %>
          <% let source = nationality.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < nationality.getVerifiers().length; i += 1) { %>
          <% let verifier = nationality.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (userSelfie) { %>
    <tr>
      <th scope="row">Selfie as base64 data</th>
      <td><img src="<%= selfieUri %>" class="rounded" /></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < userSelfie.getSources().length; i += 1) { %>
          <% let source = userSelfie.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < userSelfie.getVerifiers().length; i += 1) { %>
          <% let verifier = userSelfie.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <th scope="row">Selfie as image file</th>
      <td><img alt="selfie" src="/static/YotiSelfie.jpeg" class="rounded" /></td>
      <td colspan="3">
        <table class="table">
          <tbody>
          <% for(let i = 0; i < userSelfie.getSources().length; i += 1) { %>
          <% let source = userSelfie.getSources()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Source</td>
            <td class="col-md-6"><%= source.getValue() %></td>
            <td class="col-md-3"><%= source.getSubType() %></td>
          </tr>
          <% } %>
          <% for(let i = 0; i < userSelfie.getVerifiers().length; i += 1) { %>
          <% let verifier = userSelfie.getVerifiers()[i] %>
          <tr class="row no-gutters">
            <td class="col-md-3">Verifier</td>
            <td class="col-md-6"><%= verifier.getValue() %></td>
            <td class="col-md-3"><%= verifier.getSubType() %></td>
          </tr>
          <% } %>
          </tbody>
        </table>
      </td>
    </tr>
    <% } %>
    <% if (rememberMeId) { %>
    <tr>
      <th scope="row">Remember Me ID</th>
      <td colspan="3"><%= rememberMeId %></td>
      <td></td>
    </tr>
    <% } %>
    <% if (parentRememberMeId) { %>
    <tr>
      <th scope="row">Parent Remember Me ID</th>
      <td colspan="3"><%= parentRememberMeId %></td>
      <td></td>
    </tr>
    <% } %>
    <tr>
      <td class="table-dark">Name</td>
      <td class="table-dark">Value</td>
      <td colspan="3" width="33%" class="table-dark">
        <table class="table table-dark anchor-table">
          <tr class="row no-gutters">
            <td class="col-md-3 table-dark">S/V</td>
            <td class="col-md-6 table-dark">Value</td>
            <td class="col-md-3 table-dark">Subtype</td>
          </tr>
        </table>
      </td>
    </tr>
    </tbody>
  </table>
</div>
</body>
</html>